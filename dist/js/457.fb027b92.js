"use strict";(self["webpackChunkshopping"]=self["webpackChunkshopping"]||[]).push([[457],{9326:function(t,s,e){e.d(s,{A:function(){return r}});var i=function(){var t=this,s=t._self._c;return s("div",[s("button",{staticClass:"count-btn1",on:{click:function(s){return t.handleSub()}}},[t._v("-")]),s("input",{staticClass:"int",attrs:{type:"text"},domProps:{value:t.value},on:{change:t.handleChange}}),s("button",{staticClass:"count-btn2",on:{click:function(s){return t.handleAdd()}}},[t._v("+")])])},n=[],o={name:"CountPage",props:{value:{type:Number,default:1}},methods:{handleSub(){this.value<=1||this.$emit("input",this.value-1)},handleAdd(){this.$emit("input",this.value+1)},handleChange(t){const s=+t.target.value;isNaN(s)||s<1?t.target.value=this.value:this.$emit("input",s)}}},a=o,c=e(1656),l=(0,c.A)(a,i,n,!1,null,"240d94e2",null),r=l.exports},3457:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});e(4114);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"shopping"},[s("van-nav-bar",{attrs:{title:"购物车"}}),t.isLogin&&t.cartList.length>0?s("div",[s("div",{staticClass:"edit-box"},[s("span",[t._v("共"+t._s(t.cartTotal)+"件商品")]),s("van-icon",{attrs:{name:"edit"},on:{click:function(s){t.isEdit=!t.isEdit}}},[t._v("编辑")])],1),t._l(t.cartList,(function(e){return s("div",{key:e.goods_id,staticClass:"checked-box"},[s("van-checkbox",{attrs:{value:e.isChecked},on:{click:function(s){return t.toggleCheck(e.goods_id)}}}),s("img",{attrs:{src:e.goods.goods_image}}),s("div",{staticClass:"goods"},[s("p",{staticClass:"p1"},[t._v(t._s(e.goods.goods_name))]),s("p",{staticClass:"p2"},[t._v("￥"+t._s(e.goods.goods_price_min))]),s("CountBox",{staticClass:"count-box",attrs:{value:e.goods_num},on:{input:s=>t.changeCount(s,e.goods_id,e.goods_sku_id)}})],1)],1)})),s("div",{staticClass:"foot"},[s("van-checkbox",{attrs:{value:t.isAllChecked},on:{click:function(s){return t.toggleAllCheck()}}},[t._v("全选")]),s("p",[t._v("合计：￥"),s("span",[t._v(t._s(t.selPrice))])]),t.isEdit?s("button",{staticClass:"btn",class:{disabled:0===t.selCount},on:{click:function(s){return t.handleDel()}}},[t._v("删除")]):s("button",{staticClass:"btn",class:{disabled:0===t.selCount},on:{click:function(s){return t.goPay()}}},[t._v("结算("+t._s(t.selCount)+")")])],1)],2):s("div",{staticClass:"empty"},[s("img",{attrs:{src:e(53)}}),s("p",{staticClass:"empty_p"},[t._v("你的购物车是空的，快去逛逛吧！")]),s("button",{staticClass:"empty_btn",on:{click:function(s){return t.$router.push("/first")}}},[t._v("去逛逛")])])],1)},n=[],o=e(9326),a=e(3518),c={name:"ShoppingPage",data(){return{isEdit:!1}},computed:{...(0,a.aH)("cart",["cartList"]),...(0,a.L8)("cart",["cartTotal","selCartList","selCount","selPrice","isAllChecked"]),isLogin(){return this.$store.getters.token}},created(){this.isLogin&&this.$store.dispatch("cart/getCartAction")},methods:{toggleCheck(t){this.$store.commit("cart/toggleCheck",t)},toggleAllCheck(){this.$store.commit("cart/toggleAllCheck",!this.isAllChecked)},changeCount(t,s,e){this.$store.dispatch("cart/changeCountAction",{goodsNum:t,goodsId:s,goodsSkuId:e})},async handleDel(){0!==this.selCount&&(await this.$store.dispatch("cart/delSelect"),this.isEdit=!1)},goPay(){this.$router.push&&this.$router.push({path:"/pay",query:{mode:"cart",cartIds:this.selCartList.map((t=>t.id)).join(",")}})}},components:{CountBox:o.A},watch:{isEdit(t){t?this.$store.commit("cart/toggleAllCheck",!1):this.$store.commit("cart/toggleAllCheck",!0)}}},l=c,r=e(1656),u=(0,r.A)(l,i,n,!1,null,"afbdd73c",null),d=u.exports},53:function(t,s,e){t.exports=e.p+"img/empty_img.0dfb3f6b.png"}}]);
//# sourceMappingURL=457.fb027b92.js.map