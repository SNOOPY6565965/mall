{"ast":null,"code":"import { getProComments, getProDetail } from '@/api/product';\nimport defaultImg from '@/assets/img/defaultImg.webp';\nexport default {\n  name: 'GoodsPage',\n  data() {\n    return {\n      detail: {},\n      images: [],\n      page: 1,\n      total: 0,\n      // 评价总数\n      commentList: [],\n      // 评价列表\n      defaultImg\n    };\n  },\n  computed: {\n    goodsId() {\n      return this.$route.params.id;\n    }\n  },\n  created() {\n    this.getDetail();\n    this.getComments();\n  },\n  methods: {\n    onChange() {\n      this.page += 1;\n      if (this.page > this.images.length) {\n        this.page = 1;\n      }\n    },\n    async getDetail() {\n      const {\n        data: {\n          detail\n        }\n      } = await getProDetail(this.goodsId);\n      this.detail = detail;\n      this.images = detail.goods_images;\n    },\n    async getComments() {\n      const {\n        data: {\n          list,\n          total\n        }\n      } = await getProComments(this.goodsId, 5);\n      this.commentList = list;\n      this.total = total;\n    }\n  }\n};","map":{"version":3,"names":["getProComments","getProDetail","defaultImg","name","data","detail","images","page","total","commentList","computed","goodsId","$route","params","id","created","getDetail","getComments","methods","onChange","length","goods_images","list"],"sources":["src/views/goods/index.vue"],"sourcesContent":["<!-- 商品详情 - 一级路由 -->\r\n<template>\r\n  <div class=\"goods\">\r\n    <van-nav-bar\r\n      :v-model=\"goodsId\"\r\n      title=\"商品详情页\"\r\n      left-arrow\r\n      @click-left=\"$router.push('/searchList')\"\r\n    />\r\n    <van-swipe @change=\"onChange()\" :autoplay=\"2000\">\r\n      <van-swipe-item v-for=\"(item,index) in images\" :key=\"index\">\r\n        <img :src=\"item.external_url\">\r\n        <span class=\"page\">{{ page }} / {{ images.length }}</span>\r\n      </van-swipe-item>\r\n    </van-swipe>\r\n    <div class=\"price\">\r\n      <span class=\"min\">￥{{ detail.goods_price_min }}</span>\r\n      <span class=\"max\">￥{{ detail.line_price_max }}</span>\r\n      <span class=\"sales\">已售{{ detail.goods_sales }}件</span>\r\n    </div>\r\n    <p class=\"name\">{{ detail.goods_name }}</p>\r\n    <p class=\"icon\">\r\n      <van-icon name=\"passed\"/>\r\n      七天无理由退货\r\n      <van-icon name=\"passed\"/>\r\n      48小时发货\r\n      <van-icon name=\"arrow\"/>\r\n    </p>\r\n    <p>\r\n      <span>商品评价{{ total }}</span>\r\n      <span>\r\n        查看更多\r\n      <van-icon name=\"arrow\"/>\r\n      </span>\r\n    </p>\r\n    <div>\r\n      <ul v-for=\"item in commentList\" :key=\"item.comment_id\">\r\n        <li>\r\n          <img :src=\"item.user.avatar_url || defaultImg\">\r\n          <span>{{ item.user.nick_name }}</span>\r\n          <van-rate :v-model=\"{{ item.score / 2 }}\" :count=\"6\" />\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <!-- 商品描述 -->\r\n    <div v-html=\"detail.content\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProComments, getProDetail } from '@/api/product'\r\nimport defaultImg from '@/assets/img/defaultImg.webp'\r\nexport default {\r\n  name: 'GoodsPage',\r\n  data () {\r\n    return {\r\n      detail: {},\r\n      images: [],\r\n      page: 1,\r\n      total: 0, // 评价总数\r\n      commentList: [], // 评价列表\r\n      defaultImg\r\n    }\r\n  },\r\n  computed: {\r\n    goodsId () {\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  created () {\r\n    this.getDetail()\r\n    this.getComments()\r\n  },\r\n  methods: {\r\n    onChange () {\r\n      this.page += 1\r\n      if (this.page > this.images.length) {\r\n        this.page = 1\r\n      }\r\n    },\r\n    async getDetail () {\r\n      const { data: { detail } } = await getProDetail(this.goodsId)\r\n      this.detail = detail\r\n      this.images = detail.goods_images\r\n    },\r\n    async getComments () {\r\n      const { data: { list, total } } = await getProComments(this.goodsId, 5)\r\n      this.commentList = list\r\n      this.total = total\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/styles/css/goods.css';\r\n</style>\r\n"],"mappings":"AAkDA,SAAAA,cAAA,EAAAC,YAAA;AACA,OAAAC,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,MAAA;MACAC,IAAA;MACAC,KAAA;MAAA;MACAC,WAAA;MAAA;MACAP;IACA;EACA;EACAQ,QAAA;IACAC,QAAA;MACA,YAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACAC,SAAA;MACA,KAAAZ,IAAA;MACA,SAAAA,IAAA,QAAAD,MAAA,CAAAc,MAAA;QACA,KAAAb,IAAA;MACA;IACA;IACA,MAAAS,UAAA;MACA;QAAAZ,IAAA;UAAAC;QAAA;MAAA,UAAAJ,YAAA,MAAAU,OAAA;MACA,KAAAN,MAAA,GAAAA,MAAA;MACA,KAAAC,MAAA,GAAAD,MAAA,CAAAgB,YAAA;IACA;IACA,MAAAJ,YAAA;MACA;QAAAb,IAAA;UAAAkB,IAAA;UAAAd;QAAA;MAAA,UAAAR,cAAA,MAAAW,OAAA;MACA,KAAAF,WAAA,GAAAa,IAAA;MACA,KAAAd,KAAA,GAAAA,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}