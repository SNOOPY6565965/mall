{"version":3,"file":"js/750.ce825002.js","mappings":"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","sources":["webpack://shopping/./src/views/pay/index.vue","webpack://shopping/./src/api/address.js","webpack://shopping/./src/api/order.js","webpack://shopping/src/views/pay/index.vue","webpack://shopping/./src/views/pay/index.vue?0cce","webpack://shopping/./src/views/pay/index.vue?b002"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pay\"},[_c('div',{staticClass:\"box\"},[_c('van-nav-bar',{attrs:{\"title\":\"订单结算台\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.push('/shopping')}}}),_c('img',{staticClass:\"img1\",attrs:{\"src\":require(\"@/assets/img/货车动.png\")}}),(_vm.selectedAddress.address_id)?_c('div',{staticClass:\"box1\"},[_c('p',[_c('span',[_vm._v(_vm._s(_vm.selectedAddress.name))]),_c('span',[_vm._v(_vm._s(_vm.selectedAddress.phone))])]),_c('p',{staticClass:\"p2\"},[_vm._v(_vm._s(_vm.longAddress))])]):_c('div',{staticClass:\"box2\"},[_c('p',[_vm._v(\"请选择配送地址\")])]),_c('van-icon',{attrs:{\"name\":\"arrow\"},on:{\"click\":function($event){return _vm.$router.push('/address')}}}),_c('ul',_vm._l((12),function(i){return _c('li',{key:i})}),0),_vm._l((_vm.order.goodsList),function(item){return _c('div',{key:item,staticClass:\"goods\"},[_c('img',{attrs:{\"src\":item.goods_image}}),_c('p',{staticClass:\"goods_name\"},[_vm._v(_vm._s(item.goods_name))]),_c('p',{staticClass:\"goods_detail\"},[_c('span',{staticClass:\"goods_total\"},[_vm._v(\"×\"+_vm._s(item.total_num))]),_c('span',{staticClass:\"goods_price\"},[_vm._v(\"￥\"+_vm._s(item.goods_price_min))])])])}),_c('p',{staticClass:\"totalNum\"},[_vm._v(\"共\"+_vm._s(_vm.order.orderTotalNum)+\"件商品，合计： \"),_c('span',{staticClass:\"totalPrice\"},[_vm._v(\"￥\"+_vm._s(_vm.order.orderTotalPrice))])]),_c('hr'),_c('p',{staticClass:\"p\"},[_vm._v(\"订单总金额：\"),_c('span',{staticClass:\"sp1\"},[_vm._v(\"￥\"+_vm._s(_vm.order.orderTotalPrice))])]),_vm._m(0),_vm._m(1),_c('p',{staticClass:\"zf1\"},[_vm._v(\"支付方式\")]),_c('p',{staticClass:\"zf2\"},[_c('van-icon',{attrs:{\"name\":\"balance-o\",\"size\":\"20px\"}}),_vm._v(\" 余额支付(可用9999999.99元) \"),_c('van-icon',{attrs:{\"name\":\"passed\",\"size\":\"20px\"}})],1),_c('textarea',{staticClass:\"text\",attrs:{\"placeholder\":\"选填：卖家留言（50字内）\",\"maxlength\":\"50\"}})],2),_c('div',{staticClass:\"footer\"},[_c('p',[_vm._v(\"实付款:\"),_c('span',[_vm._v(\"￥\"+_vm._s(_vm.order.orderTotalPrice))])]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.submitOrder()}}},[_vm._v(\"提交订单\")])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',{staticClass:\"p\"},[_vm._v(\"优惠券:\"),_c('span',{staticClass:\"sp2\"},[_vm._v(\"无优惠券可用\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',{staticClass:\"p\"},[_vm._v(\"配送费用:\"),_c('span',{staticClass:\"sp3\"},[_vm._v(\"+￥0.00\")])])\n}]\n\nexport { render, staticRenderFns }","import request from '@/utils/request.js'\r\n\r\n// 收获地址列表\r\nexport const getAddressList = () => {\r\n  return request.get('/address/list')\r\n}\r\n","import request from '@/utils/request.js'\r\n\r\n// 订单结算确认\r\n// mode：cart => obj { cartIds }\r\n// mode：buyNow => obj { goodsId,goodsNum,goodsSkuId }\r\nexport const checkOrder = (mode, obj) => {\r\n  return request.get('/checkout/order', {\r\n    params: {\r\n      mode, // cart buyNum\r\n      delivery: 10, // 快递配送\r\n      couponId: 0, // 优惠卷ID，传0 不使用优惠卷\r\n      isUsePoints: 0, // 积分 传0 不使用积分\r\n      ...obj // 将传递过来的参数对象 动态展开\r\n    }\r\n  })\r\n}\r\n\r\n// 提交订单\r\n// mode：cart => obj { cartIds, remark }\r\n// mode：buyNow => obj { goodsId,goodsNum,goodsSkuId, remark}\r\nexport const submitOrder = (mode, obj) => {\r\n  return request.post('/checkout/submit', {\r\n    mode,\r\n    delivery: 10, // 10 快递配送\r\n    couponId: 0,\r\n    isUsePoints: 0,\r\n    payType: 10, // 余额支付\r\n    ...obj\r\n  })\r\n}\r\n","<!-- 结算支付 - 一级路由 -->\r\n<template>\r\n  <div class=\"pay\">\r\n    <div class=\"box\">\r\n      <van-nav-bar\r\n      title=\"订单结算台\"\r\n      left-arrow\r\n      @click-left=\"$router.push('/shopping')\"\r\n      />\r\n      <img src=\"@/assets/img/货车动.png\" class=\"img1\">\r\n      <div v-if=\"selectedAddress.address_id\" class=\"box1\">\r\n        <p><span>{{ selectedAddress.name }}</span><span>{{ selectedAddress.phone }}</span></p>\r\n        <p class=\"p2\">{{ longAddress }}</p>\r\n        <!-- <p class=\"p2\">{{ selectedAddress.address }}</p> -->\r\n      </div>\r\n      <div v-else class=\"box2\">\r\n        <p>请选择配送地址</p>\r\n      </div>\r\n      <van-icon name=\"arrow\" @click=\"$router.push('/address')\"></van-icon>\r\n      <ul>\r\n        <li v-for=\"i in 12\" :key=\"i\"></li>\r\n      </ul>\r\n      <div class=\"goods\" v-for=\"item in order.goodsList\" :key=\"item\">\r\n        <img :src=\"item.goods_image\">\r\n        <p class=\"goods_name\">{{ item.goods_name }}</p>\r\n        <p class=\"goods_detail\">\r\n          <span class=\"goods_total\">&times;{{ item.total_num }}</span>\r\n          <span class=\"goods_price\">￥{{ item.goods_price_min }}</span>\r\n        </p>\r\n      </div>\r\n      <p class=\"totalNum\">共{{ order.orderTotalNum }}件商品，合计：\r\n        <span class=\"totalPrice\">￥{{ order.orderTotalPrice }}</span>\r\n      </p>\r\n      <hr>\r\n      <p class=\"p\">订单总金额：<span class=\"sp1\">￥{{ order.orderTotalPrice }}</span></p>\r\n      <p class=\"p\">优惠券:<span class=\"sp2\">无优惠券可用</span></p>\r\n      <p class=\"p\">配送费用:<span class=\"sp3\">+￥0.00</span></p>\r\n      <p class=\"zf1\">支付方式</p>\r\n      <p class=\"zf2\">\r\n        <van-icon name=\"balance-o\" size=\"20px\" />\r\n        余额支付(可用9999999.99元)\r\n        <van-icon name=\"passed\" size=\"20px\"/>\r\n      </p>\r\n      <textarea\r\n      placeholder=\"选填：卖家留言（50字内）\"\r\n      maxlength=\"50\"\r\n      class=\"text\"\r\n      ></textarea>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <p>实付款:<span>￥{{ order.orderTotalPrice }}</span></p>\r\n      <button class=\"btn\" @click=\"submitOrder()\">提交订单</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAddressList } from '@/api/address.js'\r\nimport { checkOrder, submitOrder } from '@/api/order.js'\r\nimport { Toast } from 'vant'\r\nexport default {\r\n  name: 'PayPage',\r\n  data () {\r\n    return {\r\n      addressList: [],\r\n      order: {},\r\n      personal: {},\r\n      remark: ''// 备注留言\r\n    }\r\n  },\r\n  computed: {\r\n    selectedAddress () {\r\n      // 这里地址管理非主线业务，直接获取第一个项目作为选中的地址\r\n      return this.addressList[0] ||\r\n      {\r\n        address_id: '10012',\r\n        name: '用户一',\r\n        phone: '12345678900'\r\n        // longAddress: '中国'\r\n      }\r\n    },\r\n    longAddress () {\r\n      // const region = this.selectedAddress.region\r\n      // return region.province + region.city + region.region + this.selectedAddress.detail\r\n      return '上海上海市徐汇区北京路1号楼8888室'\r\n    },\r\n    mode () {\r\n      return this.$route.query.mode\r\n    },\r\n    cartIds () {\r\n      return this.$route.query.cartIds\r\n    },\r\n    goodsId () {\r\n      return this.$route.query.goodsId\r\n    },\r\n    goodsSkuId () {\r\n      return this.$route.query.goodsSkuId\r\n    },\r\n    goodsNum () {\r\n      return this.$route.query.goodsNum\r\n    }\r\n  },\r\n  created () {\r\n    this.getAddressList()\r\n    this.getOrderList()\r\n  },\r\n  methods: {\r\n    async submitOrder () {\r\n      if (this.mode === 'cart') {\r\n        await submitOrder(this.mode, {\r\n          cartIds: this.cartIds,\r\n          remark: this.remark\r\n        })\r\n      }\r\n      if (this.mode === 'buyNow') {\r\n        await submitOrder(this.mode, {\r\n          goodsId: this.goodsId,\r\n          goodsSkuId: this.goodsSkuId,\r\n          goodsNum: this.goodsNum,\r\n          remark: this.remark\r\n        })\r\n      }\r\n      Toast('支付成功')\r\n      // this.$router.replace('/order')\r\n    },\r\n    async getAddressList () {\r\n      const { data: { list } } = await getAddressList()\r\n      this.addressList = list\r\n    },\r\n    async getOrderList () {\r\n      // 购物车结算\r\n      if (this.mode === 'cart') {\r\n        const { data: { order, personal } } = await checkOrder(this.mode, {\r\n          cartIds: this.cartIds\r\n        })\r\n        this.order = order\r\n        this.personal = personal\r\n      }\r\n      // 立刻购买结算\r\n      if (this.mode === 'buyNow') {\r\n        const { data: { order, personal } } = await checkOrder(this.mode, {\r\n          goodsId: this.goodsId,\r\n          goodsSkuId: this.goodsSkuId,\r\n          goodsNum: this.goodsNum\r\n        })\r\n        this.order = order\r\n        this.personal = personal\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/styles/css/pay.css';\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=914c85a0&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=914c85a0&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"914c85a0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","push","require","selectedAddress","address_id","_v","_s","name","phone","longAddress","_l","i","key","order","goodsList","item","goods_image","goods_name","total_num","goods_price_min","orderTotalNum","orderTotalPrice","_m","submitOrder","staticRenderFns","getAddressList","request","get","checkOrder","mode","obj","params","delivery","couponId","isUsePoints","post","payType","data","addressList","personal","remark","computed","$route","query","cartIds","goodsId","goodsSkuId","goodsNum","created","getOrderList","methods","_Toast","list","component"],"sourceRoot":""}