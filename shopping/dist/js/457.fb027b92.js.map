{"version":3,"file":"js/457.fb027b92.js","mappings":"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","sources":["webpack://shopping/./src/components/CountBox.vue","webpack://shopping/src/components/CountBox.vue","webpack://shopping/./src/components/CountBox.vue?5eef","webpack://shopping/./src/components/CountBox.vue?bb34","webpack://shopping/./src/views/home/shopping.vue","webpack://shopping/src/views/home/shopping.vue","webpack://shopping/./src/views/home/shopping.vue?65db","webpack://shopping/./src/views/home/shopping.vue?ff79"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('button',{staticClass:\"count-btn1\",on:{\"click\":function($event){return _vm.handleSub()}}},[_vm._v(\"-\")]),_c('input',{staticClass:\"int\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.value},on:{\"change\":_vm.handleChange}}),_c('button',{staticClass:\"count-btn2\",on:{\"click\":function($event){return _vm.handleAdd()}}},[_vm._v(\"+\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <button @click=\"handleSub()\" class=\"count-btn1\">-</button>\r\n    <input type=\"text\" @change=\"handleChange\" :value=\"value\" class=\"int\">\r\n    <button @click=\"handleAdd()\" class=\"count-btn2\">+</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CountPage',\r\n  props: {\r\n    value: {\r\n      type: Number,\r\n      default: 1\r\n    }\r\n  },\r\n  methods: {\r\n    handleSub () {\r\n      if (this.value <= 1) {\r\n        return\r\n      }\r\n      this.$emit('input', this.value - 1)\r\n    },\r\n    handleAdd () {\r\n      this.$emit('input', this.value + 1)\r\n    },\r\n    handleChange (e) {\r\n      const num = +e.target.value\r\n      // 输入了不合法的文本 或 输入了负值，回退成原来的value值\r\n      if (isNaN(num) || num < 1) {\r\n        e.target.value = this.value\r\n        return\r\n      }\r\n      this.$emit('input', num)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '@/styles/css/countBox.css';\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CountBox.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CountBox.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CountBox.vue?vue&type=template&id=240d94e2&scoped=true\"\nimport script from \"./CountBox.vue?vue&type=script&lang=js\"\nexport * from \"./CountBox.vue?vue&type=script&lang=js\"\nimport style0 from \"./CountBox.vue?vue&type=style&index=0&id=240d94e2&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"240d94e2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"shopping\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\"}}),(_vm.isLogin && _vm.cartList.length > 0)?_c('div',[_c('div',{staticClass:\"edit-box\"},[_c('span',[_vm._v(\"共\"+_vm._s(_vm.cartTotal)+\"件商品\")]),_c('van-icon',{attrs:{\"name\":\"edit\"},on:{\"click\":function($event){_vm.isEdit = !_vm.isEdit}}},[_vm._v(\"编辑\")])],1),_vm._l((_vm.cartList),function(item){return _c('div',{key:item.goods_id,staticClass:\"checked-box\"},[_c('van-checkbox',{attrs:{\"value\":item.isChecked},on:{\"click\":function($event){return _vm.toggleCheck(item.goods_id)}}}),_c('img',{attrs:{\"src\":item.goods.goods_image}}),_c('div',{staticClass:\"goods\"},[_c('p',{staticClass:\"p1\"},[_vm._v(_vm._s(item.goods.goods_name))]),_c('p',{staticClass:\"p2\"},[_vm._v(\"￥\"+_vm._s(item.goods.goods_price_min))]),_c('CountBox',{staticClass:\"count-box\",attrs:{\"value\":item.goods_num},on:{\"input\":(value) => _vm.changeCount(value,item.goods_id,item.goods_sku_id)}})],1)],1)}),_c('div',{staticClass:\"foot\"},[_c('van-checkbox',{attrs:{\"value\":_vm.isAllChecked},on:{\"click\":function($event){return _vm.toggleAllCheck()}}},[_vm._v(\"全选\")]),_c('p',[_vm._v(\"合计：￥\"),_c('span',[_vm._v(_vm._s(_vm.selPrice))])]),(!_vm.isEdit)?_c('button',{staticClass:\"btn\",class:{disabled:_vm.selCount === 0},on:{\"click\":function($event){return _vm.goPay()}}},[_vm._v(\"结算(\"+_vm._s(_vm.selCount)+\")\")]):_c('button',{staticClass:\"btn\",class:{disabled:_vm.selCount === 0},on:{\"click\":function($event){return _vm.handleDel()}}},[_vm._v(\"删除\")])],1)],2):_c('div',{staticClass:\"empty\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/empty_img.png\")}}),_c('p',{staticClass:\"empty_p\"},[_vm._v(\"你的购物车是空的，快去逛逛吧！\")]),_c('button',{staticClass:\"empty_btn\",on:{\"click\":function($event){return _vm.$router.push('/first')}}},[_vm._v(\"去逛逛\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 购物车 -->\r\n<template>\r\n  <div class=\"shopping\">\r\n    <van-nav-bar title=\"购物车\" />\r\n    <div v-if=\"isLogin && cartList.length > 0\">\r\n      <div class=\"edit-box\">\r\n        <span>共{{cartTotal}}件商品</span>\r\n        <van-icon name=\"edit\" @click=\"isEdit = !isEdit\">编辑</van-icon>\r\n      </div>\r\n      <div class=\"checked-box\" v-for=\"item in cartList\" :key=\"item.goods_id\">\r\n        <van-checkbox :value=\"item.isChecked\" @click=\"toggleCheck(item.goods_id)\"></van-checkbox>\r\n        <img :src=\"item.goods.goods_image\">\r\n          <div class=\"goods\">\r\n            <p class=\"p1\">{{ item.goods.goods_name }}</p>\r\n            <p class=\"p2\">￥{{ item.goods.goods_price_min }}</p>\r\n            <!-- 即希望保留原本的形参，又需要通过调用函数形参 => 箭头函数包装一层 -->\r\n            <!-- <CountBox @input=\"changeCount\" :value=\"item.goods_num\" class=\"count-box\"></CountBox> -->\r\n            <CountBox @input=\"(value) => changeCount(value,item.goods_id,item.goods_sku_id)\" :value=\"item.goods_num\" class=\"count-box\"></CountBox>\r\n          </div>\r\n      </div>\r\n      <div class=\"foot\">\r\n        <van-checkbox :value=\"isAllChecked\" @click=\"toggleAllCheck()\">全选</van-checkbox>\r\n        <p>合计：￥<span>{{ selPrice }}</span></p>\r\n        <button v-if=\"!isEdit\" class=\"btn\" :class=\"{disabled:selCount === 0}\" @click=\"goPay()\">结算({{ selCount }})</button>\r\n        <button v-else @click=\"handleDel()\" class=\"btn\" :class=\"{disabled:selCount === 0}\">删除</button>\r\n      </div>\r\n    </div>\r\n    <!-- 空购物车 -->\r\n    <div class=\"empty\" v-else>\r\n      <img src=\"@/assets/img/empty_img.png\">\r\n      <p class=\"empty_p\">你的购物车是空的，快去逛逛吧！</p>\r\n      <button class=\"empty_btn\" @click=\"$router.push('/first')\">去逛逛</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CountBox from '@/components/CountBox.vue'\r\nimport { mapState, mapGetters } from 'vuex'\r\nexport default {\r\n  name: 'ShoppingPage',\r\n  data () {\r\n    return {\r\n      isEdit: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('cart', ['cartList']),\r\n    ...mapGetters('cart', ['cartTotal', 'selCartList', 'selCount', 'selPrice', 'isAllChecked']),\r\n    isLogin () {\r\n      return this.$store.getters.token\r\n    }\r\n  },\r\n  created () {\r\n    // 必须是登录过的用户，才能打开购物车列表\r\n    // if (this.$store.getters.token) {\r\n    if (this.isLogin) {\r\n      this.$store.dispatch('cart/getCartAction')\r\n    }\r\n  },\r\n  methods: {\r\n    toggleCheck (goodsId) {\r\n      this.$store.commit('cart/toggleCheck', goodsId)\r\n    },\r\n    toggleAllCheck () {\r\n      this.$store.commit('cart/toggleAllCheck', !this.isAllChecked)\r\n    },\r\n    changeCount (goodsNum, goodsId, goodsSkuId) {\r\n      // console.log(goodsNum, goodsId, goodsSkuId)\r\n      // 调用 vuex 的 action，进行数量的修改\r\n      this.$store.dispatch('cart/changeCountAction', {\r\n        goodsNum,\r\n        goodsId,\r\n        goodsSkuId\r\n      })\r\n    },\r\n    async handleDel () {\r\n      if (this.selCount === 0) return\r\n      await this.$store.dispatch('cart/delSelect')\r\n      this.isEdit = false\r\n    },\r\n    goPay () {\r\n      // 判断有没有选中商品\r\n      if (this.$router.push) {\r\n        // 有选中的 商品 才进行结算跳转\r\n        this.$router.push({\r\n          path: '/pay',\r\n          query: {\r\n            mode: 'cart',\r\n            cartIds: this.selCartList.map(item => item.id).join(',') // 'cartId,cartId,cartId'\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n\r\n  components: {\r\n    CountBox\r\n  },\r\n  watch: {\r\n    isEdit (value) {\r\n      if (value) {\r\n        this.$store.commit('cart/toggleAllCheck', false)\r\n      } else {\r\n        this.$store.commit('cart/toggleAllCheck', true)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import '@/styles/css/shopping.css';\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./shopping.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./shopping.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./shopping.vue?vue&type=template&id=afbdd73c&scoped=true\"\nimport script from \"./shopping.vue?vue&type=script&lang=js\"\nexport * from \"./shopping.vue?vue&type=script&lang=js\"\nimport style0 from \"./shopping.vue?vue&type=style&index=0&id=afbdd73c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"afbdd73c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","handleSub","_v","attrs","domProps","value","handleChange","handleAdd","staticRenderFns","name","props","type","Number","default","methods","$emit","e","num","target","isNaN","component","isLogin","cartList","length","_s","cartTotal","isEdit","_l","item","key","goods_id","isChecked","toggleCheck","goods","goods_image","goods_name","goods_price_min","goods_num","changeCount","goods_sku_id","isAllChecked","toggleAllCheck","selPrice","class","disabled","selCount","handleDel","goPay","require","$router","push","data","computed","mapState","mapGetters","$store","getters","token","created","dispatch","goodsId","commit","goodsNum","goodsSkuId","path","query","mode","cartIds","selCartList","map","id","join","components","CountBox","watch"],"sourceRoot":""}